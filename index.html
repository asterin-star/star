<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Or√°culo 7.41 | WhiteSur</title>
    <style>
        /* =====================================================
           OR√ÅCULO WHITESUR - PROYECTO 7.41
           Fusi√≥n: Glassmorphism Apple Music Style + Misticismo
        ===================================================== */
        
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');

        :root {
            /* GLASSMORPHISM - Ajustado para fondos din√°micos claros */
            --glass-surface: rgba(255, 255, 255, 0.5);
            --glass-border: rgba(255, 255, 255, 0.6);
            --glass-blur: 35px;
            --shadow-soft: 0 12px 42px rgba(0, 0, 0, 0.1);
            --shadow-card: 0 8px 32px rgba(0, 0, 0, 0.15);
            
            /* TIPOGRAF√çA - Ajustada a oscuro para legibilidad sobre cristal claro */
            --text-primary: #1d1d1f;
            --text-secondary: #424245;
            --text-tertiary: rgba(0, 0, 0, 0.5);
            
            /* ANIMACIONES - Basadas en principios de Apple HIG */
            --ease-smooth: cubic-bezier(0.22, 1, 0.36, 1); /* Ease out suave */
            --ease-bounce: cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Rebote sutil */
            --ease-natural: cubic-bezier(0.4, 0.0, 0.2, 1); /* Material Design */

            /* Variables para colores din√°micos del fondo */
            --color1: #ffffff;
            --color2: #ffffff;
            --color3: #ffffff;
            --color4: #ffffff;
        }

        * {
            box-sizing: border-box;
        }

        /* Eliminar outline azul de selecci√≥n (Requerimiento del usuario) */
        *:focus,
        button:focus,
        a:focus,
        [tabindex]:focus,
        *:focus-visible {
            outline: none !important;
            box-shadow: none !important;
            -webkit-tap-highlight-color: transparent; /* Para m√≥viles */
        }

        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            min-height: 100%;
            font-family: 'Poppins', -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            overflow-y: auto;
            overflow-x: hidden;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            -webkit-overflow-scrolling: touch;
        }

        /* ==================== WALLPAPER DIN√ÅMICO ESTILO APPLE MUSIC L√çQUIDO ==================== */
        .wallpaper {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #ffffff; /* Inicia en blanco */
            z-index: -2;
            overflow: hidden; /* Contiene las manchas de color */
            transition: background-color 0.8s var(--ease-smooth);
        }

        .wallpaper.active {
             /* Un ligero tinte cuando est√° activo para mejorar el efecto */
            background: #f9f9f9;
        }

        /* Manchas de color (Blobs) */
        .blob {
            position: absolute;
            border-radius: 50%;
            /* El blur intenso crea el efecto l√≠quido/borroso. Ajustado para ser muy fluido. */
            filter: blur(120px); 
            opacity: 0;
            /* Transici√≥n suave al aparecer */
            transition: opacity 1.5s ease-in-out;
            width: 60vmax;
            height: 60vmax;
            /* Mejora la mezcla de colores sobre fondo claro */
            mix-blend-mode: multiply; 
        }

        .wallpaper.active .blob {
            /* Opacidad ajustada para un efecto sutil */
            opacity: 0.65;
        }

        /* Asignaci√≥n de colores din√°micos y animaciones √∫nicas */
        .blob1 { background: var(--color1); animation: move1 28s ease-in-out infinite alternate; }
        .blob2 { background: var(--color2); animation: move2 32s ease-in-out infinite alternate; }
        .blob3 { background: var(--color3); animation: move3 38s ease-in-out infinite alternate; }
        .blob4 { background: var(--color4); animation: move4 42s ease-in-out infinite alternate; }

        /* Keyframes para movimiento lento y org√°nico */
        @keyframes move1 {
            from { transform: translate(-20%, -20%) scale(1) rotate(0deg); }
            to { transform: translate(30%, 40%) scale(1.4) rotate(360deg); }
        }
        @keyframes move2 {
            from { transform: translate(50%, -30%) scale(1.2) rotate(0deg); }
            to { transform: translate(-20%, 60%) scale(0.9) rotate(-360deg); }
        }
        @keyframes move3 {
            from { transform: translate(70%, 70%) scale(0.9) rotate(0deg); }
            to { transform: translate(10%, -10%) scale(1.5) rotate(360deg); }
        }
        @keyframes move4 {
            from { transform: translate(-10%, 80%) scale(1.1) rotate(0deg); }
            to { transform: translate(60%, -20%) scale(1) rotate(-360deg); }
        }


        /* CAPA DE TEXTURA - Efecto "papel antiguo" muy sutil */
        .noise-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="300" height="300"><filter id="n"><feTurbulence type="fractalNoise" baseFrequency="0.9" numOctaves="4" stitchTiles="stitch"/></filter><rect width="300" height="300" filter="url(%23n)" opacity="0.05"/></svg>');
            opacity: 0.08;
            z-index: -1;
            pointer-events: none;
            mix-blend-mode: overlay;
        }

        /* ==================== INTERFACE PRINCIPAL ==================== */
        .interface {
            position: relative;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            gap: 40px;
            width: 100%;
            max-width: 1400px;
            min-height: 100vh;
            padding: 40px 20px;
            margin: 0 auto;
        }

        /* ==================== CARTA - ZONA INTERACTIVA ==================== */
        .card-stage {
            perspective: 1800px;
            width: 300px;
            height: 490px;
            cursor: pointer;
            /* transition: transform 0.35s var(--ease-natural); ELIMINADO para quitar efecto hover */
            z-index: 10;
            margin-top: 20px;
            flex-shrink: 0;
            animation: breathe 4s ease-in-out infinite;
        }

        @keyframes breathe {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.01); }
        }

        /* Eliminar efecto de levantamiento al pasar el mouse (Requerimiento del usuario) */
        .card-stage:hover {
            /* Detenemos la respiraci√≥n, pero no aplicamos transformaciones adicionales */
            animation: none;
        }

        .card-stage.flipped {
            animation: none; /* Sin breathing cuando est√° revelada */
        }

        /* CONTENEDOR INTERNO 3D */
        .card-inner {
            position: relative;
            width: 100%;
            height: 100%;
            transform-style: preserve-3d;
            transition: transform 0.85s var(--ease-bounce);
        }

        .card-stage.flipped .card-inner {
            transform: rotateY(180deg);
        }

        /* CARAS DE LA CARTA */
        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            -webkit-backface-visibility: hidden;
            border-radius: 26px;
            box-shadow: var(--shadow-card);
            overflow: hidden;
        }

        /* DORSO - Gradiente P√∫rpura/√çndigo solicitado */
        .front {
            /* Implementaci√≥n de: bg-gradient-to-br from-purple-900/20 to-indigo-900/20 */
            /* Y radial-gradient(circle at 30% 30%, rgba(147, 51, 234, 0.1) 0%, transparent 50%) */
            
            background-image: 
                radial-gradient(circle at 30% 30%, rgba(147, 51, 234, 0.15) 0%, transparent 50%),
                linear-gradient(to bottom right, rgba(147, 51, 234, 0.25), rgba(79, 70, 229, 0.25));

            /* backdrop-blur-sm (aproximadamente 8px) */
            backdrop-filter: blur(8px);
            -webkit-backdrop-filter: blur(8px);
            
            border: 1.5px solid rgba(255, 255, 255, 0.3);
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 
                var(--shadow-card),
                inset 0 1px 0 rgba(255, 255, 255, 0.4);
        }

        /* S√≠mbolo lunar central - Ajustado para el nuevo fondo */
        .symbol {
            width: 70px;
            height: 70px;
            border: 1.5px solid rgba(255, 255, 255, 0.4);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2rem;
            color: rgba(255, 255, 255, 0.8);
            font-weight: 300;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(5px);
            animation: pulse 3s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { 
                transform: scale(1);
                opacity: 0.8;
            }
            50% { 
                transform: scale(1.05);
                opacity: 1;
            }
        }

        /* ANVERSO - La revelaci√≥n */
        .back {
            /* Fondo tipo cristal claro para la carta revelada */
            background: rgba(255, 255, 255, 0.8);
            backdrop-filter: blur(10px);
            transform: rotateY(180deg);
            border: 1px solid rgba(255, 255, 255, 0.5);
            overflow: hidden;
            padding: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .tarot-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            /* ELIMINACI√ìN DE FONDO BLANCO (Importante si las im√°genes lo tienen) */
            mix-blend-mode: darken;
            filter: contrast(1.1) saturate(1.1) brightness(1.05);
            transition: transform 4s var(--ease-smooth);
        }

        /* Efecto zoom al revelar */
        .card-stage.flipped .tarot-img {
            transform: scale(1.02);
        }

        /* ==================== PANEL DE LECTURA ==================== */
        /* Estilo Apple Music Lyrics */
        .insight-panel {
            width: 92%;
            max-width: 720px;
            background: var(--glass-surface);
            backdrop-filter: blur(var(--glass-blur));
            -webkit-backdrop-filter: blur(var(--glass-blur));
            border-radius: 22px;
            padding: 32px 42px 36px;
            border: 1.5px solid var(--glass-border);
            box-shadow: 
                var(--shadow-soft),
                inset 0 1px 0 rgba(255, 255, 255, 0.6);
            
            /* Estado inicial: invisible */
            opacity: 0;
            transform: translateY(25px) scale(0.96);
            transition: all 0.9s var(--ease-smooth);
            text-align: left;
            pointer-events: none;
            z-index: 5;
            margin-bottom: 60px;
            flex-shrink: 0;
        }

        .insight-panel.active {
            opacity: 1;
            transform: translateY(0) scale(1);
            pointer-events: auto;
        }

        /* T√çTULO Y TEXTOS - AJUSTADOS PARA LECTURA SOBRE CRISTAL CLARO */
        
        h2 {
            margin: 0 0 22px 0;
            font-weight: 700;
            font-size: 1.5rem;
            letter-spacing: 1.5px;
            text-transform: uppercase;
            text-align: center;
            color: var(--text-primary);
            /* Efecto de texto "grabado" sutil en lugar de shimmer brillante */
            text-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
            animation: fadeSlideIn 0.6s var(--ease-smooth) 0.2s both;
        }

        /* SECCIONES DE CONTENIDO */
        .section {
            margin-bottom: 24px;
            animation: fadeSlideIn 0.7s var(--ease-smooth) both;
        }

        .section:nth-child(2) { animation-delay: 0.3s; }
        .section:nth-child(3) { animation-delay: 0.4s; }
        .section:nth-child(4) { animation-delay: 0.5s; }
        .section:nth-child(5) { animation-delay: 0.6s; }
        .section:nth-child(6) { animation-delay: 0.7s; }
        .section:nth-child(7) { animation-delay: 0.8s; }

        .section-title {
            font-size: 0.85rem;
            font-weight: 600;
            letter-spacing: 0.8px;
            text-transform: uppercase;
            color: var(--text-secondary);
            margin: 0 0 8px 0;
            text-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            gap: 4px;
            transition: all 0.2s ease;
        }

        .section-title:hover {
            color: var(--accent-primary);
            text-shadow: 0 1px 2px rgba(255, 255, 255, 0.9);
        }

        .section-title::after {
            content: '>';
            opacity: 0.6;
            font-weight: 300;
            font-size: 0.75em;
            transition: opacity 0.2s ease;
        }

        .section-title:hover::after {
            opacity: 0.9;
            color: var(--accent-primary);
        }

        .intro-section {
            background: rgba(255, 255, 255, 0.15);
            border-radius: 12px;
            padding: 16px 20px;
            margin: 0 0 24px 0;
            border: 1px solid rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            animation: fadeSlideIn 0.6s ease-out;
        }

        .intro-text {
            font-size: 0.9rem;
            line-height: 1.6;
            color: var(--text-primary);
            margin: 0;
            text-align: justify;
        }

        .intro-text em {
            color: var(--accent-primary);
            font-weight: 500;
            font-style: italic;
        }

        .section-content {
            font-size: 1rem;
            line-height: 1.7;
            color: var(--text-primary);
            font-weight: 400;
            margin: 0;
        }

        .biblical-verse {
            font-style: italic;
            border-left: 2px solid rgba(0, 0, 0, 0.2);
            padding-left: 16px;
            margin-top: 6px;
            color: var(--text-secondary);
        }

        .verse-reference {
            display: block;
            margin-top: 8px;
            font-size: 0.8rem;
            color: var(--text-tertiary);
            font-style: normal;
            text-align: right;
        }

        /* ==================== MODAL GLASSMORPHISM BLANCO ==================== */
        .modal-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.3);
            backdrop-filter: blur(12px);
            -webkit-backdrop-filter: blur(12px);
            display: flex;
            justify-content: center;
            align-items: flex-start;
            z-index: 10000;
            animation: modalFadeIn 0.3s ease-out;
            padding: 40px 20px;
        }

        .modal-content {
            background: rgba(255, 255, 255, 0.85);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 16px;
            box-shadow: 
                0 25px 50px rgba(0, 0, 0, 0.15),
                0 0 0 1px rgba(255, 255, 255, 0.1);
            max-width: 700px;
            width: 100%;
            animation: modalSlideIn 0.4s cubic-bezier(0.16, 1, 0.3, 1);
            margin-top: 20vh;
        }

        .modal-header {
            padding: 24px 28px 20px 28px;
            border-bottom: 1px solid rgba(0, 0, 0, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .modal-header h3 {
            margin: 0;
            font-size: 1.4rem;
            font-weight: 600;
            color: #2c2c2c;
        }

        .modal-close {
            background: none;
            border: none;
            font-size: 2rem;
            color: #666;
            cursor: pointer;
            padding: 0;
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.2s ease;
        }

        .modal-close:hover {
            background: rgba(0, 0, 0, 0.05);
            color: #2c2c2c;
        }

        .modal-body {
            padding: 24px 28px;
        }

        .modal-body p {
            margin: 0;
            font-size: 1.1rem;
            line-height: 1.7;
            color: #333;
            text-align: justify;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .modal-footer {
            padding: 16px 28px 28px 28px;
            border-top: 1px solid rgba(0, 0, 0, 0.1);
            text-align: right;
        }

        .modal-footer small {
            font-size: 0.9rem;
            color: #666;
        }

        @keyframes modalFadeIn {
            from {
                opacity: 0;
            }
            to {
                opacity: 1;
            }
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* TEXTO DE LECTURA */
        p {
            margin: 0;
            font-size: 1rem;
            line-height: 1.7;
            color: var(--text-primary);
            font-weight: 400;
        }

        /* BOT√ìN DE REINICIO - ELIMINADO (Se eliminan los estilos .card-reset-btn) */



        /* ==================== RESPONSIVE ==================== */
        @media (max-width: 1024px) {
            .card-stage {
                width: 280px;
                height: 460px;
            }
            .insight-panel {
                width: 90%;
                max-width: 600px;
            }
            .blob {
                filter: blur(90px);
            }
        }

        @media (max-width: 768px) {
            .card-stage {
                width: 260px;
                height: 420px;
            }
            .insight-panel {
                width: 94%;
                max-width: 500px;
                padding: 22px 28px;
            }
            h2 {
                font-size: 1.1rem;
            }
            p, .section-content {
                font-size: 0.92rem;
                line-height: 1.65;
            }
            .blob {
                filter: blur(70px);
            }
        }

        @media (max-width: 480px) {
            .card-stage {
                width: 240px;
                height: 390px;
            }
            .insight-panel {
                width: 96%;
                padding: 18px 24px;
                max-width: 400px;
            }
            h2 {
                font-size: 1rem;
                letter-spacing: 1px;
                margin-bottom: 12px;
            }
            p, .section-content {
                font-size: 0.88rem;
            }
        }

        @media (max-width: 360px) {
            .card-stage {
                width: 200px;
                height: 320px;
            }
            .insight-panel {
                width: 98%;
                padding: 16px 20px;
            }
            h2 {
                font-size: 0.95rem;
            }
            p, .section-content {
                font-size: 0.85rem;
            }
        }

        /* ==================== ACCESIBILIDAD ==================== */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
            .blob {
                animation: none !important;
            }
        }

    </style>
</head>
<body>

    <div class="wallpaper" id="wallpaper">
        <div class="blob blob1"></div>
        <div class="blob blob2"></div>
        <div class="blob blob3"></div>
        <div class="blob blob4"></div>
    </div>
    <div class="noise-overlay"></div>

    <div class="interface">
        <div class="card-stage" id="cardStage">
            <div class="card-inner">
                <div class="card-face front">
                    <div class="symbol">‚òæ</div>
                </div>
                <div class="card-face back">
                    <img id="cardImg" src="" alt="Arcano del Tarot" class="tarot-img">
                    </div>
            </div>
        </div>

        <div class="insight-panel" id="insightPanel">
            <h2 id="cardTitle"></h2>
            
            <div class="intro-section" id="introSection" style="display:none;">
                <p class="intro-text"><em id="introExample"></em></p>
            </div>
            
            <div class="section" id="seccionSignificado">
                <div class="section-title" id="titleArquetipo">‚úß Sombras y Peligros</div>
                <p class="section-content" id="textoSignificado"></p>
            </div>

            <div class="section" id="seccionAmpliado" style="display:none;">
                <div class="section-title" id="titleMisticismo">‚ú¶ Misticismo</div>
                <p class="section-content" id="textoAmpliado"></p>
            </div>

            <div class="section" id="seccionNegativo" style="display:none;">
                <div class="section-title" id="titleSombra">‚úß Sombra</div>
                <p class="section-content" id="textoNegativo"></p>
            </div>

            <div class="section" id="seccionBotanica" style="display:none;">
                <div class="section-title" id="titleBotanica">‚ú¶ Botanica</div>
                <p class="section-content" id="textoBotanica"></p>
            </div>

            <div class="section" id="seccionCotidiano" style="display:none;">
                <div class="section-title" id="titleCotidiano">‚úß Cotidiano</div>
                <p class="section-content" id="textoCotidiano"></p>
            </div>

            <div class="section" id="seccionMistico" style="display:none;">
                <div class="section-title" id="titleGnosis">‚ú¶ Gnosis</div>
                <p class="section-content" id="textoMistico"></p>
            </div>

            <div class="section" id="seccionBiblico" style="display:none;">
                <div class="section-title" id="titleResonanciaBiblica">‚úß Resonancia Biblica</div>
                <div class="section-content">
                    <div class="biblical-verse" id="textoBiblico"></div>
                </div>
            </div>
        </div>

        <!-- Modal para ejemplos de los 22 conceptos -->
        <div class="modal-overlay" id="modalOverlay" style="display: none;">
            <div class="modal-content" id="modalContent">
                <div class="modal-header">
                    <h3 id="modalTitle"></h3>
                    <button class="modal-close" id="modalClose">&times;</button>
                </div>
                <div class="modal-body">
                    <p id="modalText"></p>
                </div>
                <div class="modal-footer">
                    <small id="modalNumber"></small>
                </div>
            </div>
        </div>

    </div>

    <script>
        /* =====================================================
           L√ìGICA DEL OR√ÅCULO
        ===================================================== */

        const cardStage = document.getElementById('cardStage');
        const insightPanel = document.getElementById('insightPanel');
        const cardTitle = document.getElementById('cardTitle');
        const cardImg = document.getElementById('cardImg');

        const wallpaper = document.getElementById('wallpaper');
                
        // Elementos de las 6 secciones
        const textoSignificado = document.getElementById('textoSignificado');
        const textoAmpliado = document.getElementById('textoAmpliado');
        const textoNegativo = document.getElementById('textoNegativo');
        const textoBotanica = document.getElementById('textoBotanica');
        const textoCotidiano = document.getElementById('textoCotidiano');
        const textoMistico = document.getElementById('textoMistico');
        const textoBiblico = document.getElementById('textoBiblico');
        
        const seccionAmpliado = document.getElementById('seccionAmpliado');
        const seccionNegativo = document.getElementById('seccionNegativo');
        const seccionBotanica = document.getElementById('seccionBotanica');
        const seccionCotidiano = document.getElementById('seccionCotidiano');
        const seccionMistico = document.getElementById('seccionMistico');
        const seccionBiblico = document.getElementById('seccionBiblico');

        let isRevealed = false;
        let currentCardData = null;
        
        // Arrays globales para almacenar todos los conceptos por categor√≠a (22 conceptos cada uno)
        let allArquetipos = [];
        let allMisticismos = [];
        let allSombras = [];
        let allBotanicas = [];
        let allCotidianos = [];
        let allGnosis = [];
        let allResonanciasBiblicas = [];

        /* ==================== PALETAS DE COLORES RIDER-WAITE ==================== */
        // Basado en los colores visualmente dominantes y simb√≥licos de las cartas est√°ndar.
        const colorPalettes = {
            'ar00': ['#FFEB3B', '#81D4FA', '#FFFFFF', '#F44336'], // El Loco: Amarillo brillante, Azul claro, Blanco, Rojo
            'ar01': ['#F44336', '#FFFFFF', '#FFC107', '#4CAF50'], // El Mago: Rojo, Blanco, Amarillo, Verde
            'ar02': ['#64B5F6', '#FFFFFF', '#B0BEC5', '#1976D2'], // La Sacerdotisa: Azul claro, Blanco, Gris claro, Azul oscuro
            'ar03': ['#FFC107', '#4CAF50', '#F44336', '#FFF9C4'], // La Emperatriz: Amarillo, Verde, Rojo, Crema
            'ar04': ['#D32F2F', '#FF9800', '#9E9E9E', '#B0BEC5'], // El Emperador: Rojo oscuro, Naranja, Gris piedra
            'ar05': ['#F44336', '#757575', '#FFFFFF', '#FFC107'], // El Sumo Sacerdote: Rojo, Gris, Blanco, Oro
            'ar06': ['#81D4FA', '#FFEB3B', '#4CAF50', '#9C27B0'], // Los Enamorados: Azul claro, Amarillo sol, Verde, P√∫rpura
            'ar07': ['#B0BEC5', '#2196F3', '#FFC107', '#616161'], // El Carro: Gris, Azul, Oro, Negro/Gris
            'ar08': ['#FFFFFF', '#FF9800', '#8BC34A', '#F44336'], // La Fuerza: Blanco, Naranja, Verde claro, Rojo le√≥n
            'ar09': ['#9E9E9E', '#616161', '#B0BEC5', '#FFEB3B'], // El Ermita√±o: Grises, Amarillo estrella
            'ar10': ['#FF9800', '#2196F3', '#F44336', '#FFC107'], // La Rueda: Naranja, Azul, Rojo, Oro
            'ar11': ['#D32F2F', '#4CAF50', '#FFC107', '#9E9E9E'], // La Justicia: Rojo oscuro, Verde, Oro, Gris
            'ar12': ['#2196F3', '#F44336', '#9E9E9E', '#FFEB3B'], // El Colgado: Azul, Rojo, Gris, Amarillo halo
            'ar13': ['#616161', '#FFFFFF', '#9E9E9E', '#FFEB3B'], // La Muerte: Gris oscuro, Blanco, Gris, Amarillo sol
            'ar14': ['#FFFFFF', '#81D4FA', '#FFC107', '#F44336'], // La Templanza: Blanco, Azul claro, Oro, Rojo
            'ar15': ['#424242', '#757575', '#F44336', '#795548'], // El Diablo: Negro, Gris, Rojo, Marr√≥n
            'ar16': ['#9E9E9E', '#616161', '#F44336', '#FFEB3B'], // La Torre: Gris, Negro, Rojo fuego, Amarillo rayo
            'ar17': ['#64B5F6', '#FFC107', '#4CAF50', '#FFFFFF'], // La Estrella: Azul claro, Amarillo, Verde, Blanco
            'ar18': ['#FFC107', '#2196F3', '#9E9E9E', '#1976D2'], // La Luna: Amarillo, Azul, Gris, Azul oscuro
            'ar19': ['#FFEB3B', '#FF9800', '#FFFFFF', '#F44336'], // El Sol: Amarillo brillante, Naranja, Blanco, Rojo
            'ar20': ['#81D4FA', '#FFFFFF', '#F44336', '#FFC107'], // El Juicio: Azul claro, Blanco, Rojo bandera, Oro trompeta
            'ar21': ['#2196F3', '#9C27B0', '#4CAF50', '#FFC107'], // El Mundo: Azul, P√∫rpura, Verde, Oro
        };

        /* ==================== SISTEMA DE RANDOMIZACI\u00d3N TEMPORAL ==================== */
        function getTemporalBiblicalVerse() {
            const now = new Date();
            
            // Obtener vers√≠culos b√≠blicos de la carta actual
            if (!currentCardData || !currentCardData.fullData || !currentCardData.fullData.resonancia_biblica) {
                return 'Los textos sagrados est√°n en silencio en este momento.';
            }

            const resonanciaBiblica = currentCardData.fullData.resonancia_biblica;
            
            // Crear un array temporal con el vers√≠culo actual y variaciones basadas en el tiempo
            const versiculos = [
                `${resonanciaBiblica.cita} - ${resonanciaBiblica.referencia}`,
                `${resonanciaBiblica.conexion} - ${resonanciaBiblica.referencia}`
            ];
            
            // "Encarcelamiento temporal" para seleccionar entre los vers√≠culos
            const hour = now.getHours();
            const minute = now.getMinutes();
            const day = now.getDate();
            const month = now.getMonth() + 1;
            
            const temporalHash = (
                (hour * 3600) + 
                (minute * 60) + 
                (day * 31) + 
                (month * 12)
            ) % versiculos.length;
            
            const verseText = versiculos[temporalHash];
            
            // Extraer referencia del texto (Formato: 'Texto' - Referencia)
            const parts = verseText.split(' - ');
            let text, ref;

            if (parts.length > 1) {
                text = parts[0];
                ref = parts[1];
            } else {
                text = verseText;
                ref = resonanciaBiblica.referencia;
            }
            
            // Limpiar comillas residuales
            text = text.replace(/['"¬´¬ª]/g, '').trim();
            ref = ref.replace(/['"¬´¬ª]/g, '').trim();
                        
            return `${text}<span class="verse-reference">‚Äî ${ref}</span>`;
        }

        /* ==================== PREPARACI√ìN INICIAL ==================== */
        async function prepareOracle() {
            try {
                // Cargar todos los archivos JSON locales
                const [response1, response2, response3, response4] = await Promise.all([
                    fetch('./data/0-5.json'),
                    fetch('./data/6-10.json'),
                    fetch('./data/11-15.json'),
                    fetch('./data/16-21.json')
                ]);

                const data1 = await response1.json();
                const data2 = await response2.json();
                const data3 = await response3.json();
                const data4 = await response4.json();

                // Combinar todas las cartas en un solo array
                const allCards = [...data1, ...data2, ...data3, ...data4];
                
                // EXTRAER TODOS LOS CONCEPTOS POR CATEGOR√çA (22 conceptos cada uno)
                allArquetipos = allCards.map(card => card.contenido.arquetipo);
                allMisticismos = allCards.map(card => card.contenido.misticismo);
                allSombras = allCards.map(card => card.contenido.sombra);
                allBotanicas = allCards.map(card => card.contenido.botanica);
                allCotidianos = allCards.map(card => card.contenido.cotidiano);
                allGnosis = allCards.map(card => card.contenido.gnosis);
                allResonanciasBiblicas = allCards.map(card => card.contenido.resonancia_biblica);
                
                console.log('üìö Conceptos cargados:', {
                    arquetipos: allArquetipos.length,
                    misticismos: allMisticismos.length,
                    sombras: allSombras.length,
                    botanicas: allBotanicas.length,
                    cotidianos: allCotidianos.length,
                    gnosis: allGnosis.length,
                    resonancias: allResonanciasBiblicas.length
                });
                
                // Seleccionar una carta aleatoria
                const randomIndex = Math.floor(Math.random() * allCards.length);
                const selectedCard = allCards[randomIndex];

                // Formatear datos
                currentCardData = {
                    name: selectedCard.nombre,
                    name_short: `ar${selectedCard.id.toString().padStart(2, '0')}`,
                    fullData: selectedCard.contenido
                };

                // Configurar imagen local (./cards/arXX.jpg)
                const cardSlug = currentCardData.name_short;
                const imageUrl = `./cards/${cardSlug}.jpg`;

                // Precarga de imagen
                const img = new Image();
                img.onload = () => {
                    cardImg.src = imageUrl;
                };
                img.onerror = () => {
                    // Fallback: usar imagen del Loco si falla la carga
                    cardImg.src = './cards/ar00.jpg';
                };
                img.src = imageUrl;

                console.log('‚ú® Carta preparada:', currentCardData.name);

            } catch (error) {
                console.error('üåô Error cargando cartas locales:', error);
                // En caso de error, crear carta de fallback
                currentCardData = {
                    name: 'El Silencio',
                    name_short: 'ar00',
                    fullData: {
                        arquetipo: ['El √©ter est√° turbio en este momento. Respira, centra tu intenci√≥n y consulta nuevamente.'],
                        misticismo: [], sombra: [], gnosis: [], cotidiano: [], 
                        resonancia_biblica: {
                            cita: 'En este momento de silencio, escucha tu coraz√≥n.',
                            referencia: '1 Reyes 19:12',
                            conexion: 'El murmullo de una brisa suave se√±ala la presencia divina en el silencio.'
                        }
                    }
                };
                cardImg.src = './cards/ar00.jpg';
            }
        }

        /* ==================== REVELACI√ìN ==================== */
        function revealDestiny() {
            if (!currentCardData) return;
            
            isRevealed = true;

            // 1. ACTIVAR WALLPAPER Y APLICAR PALETA DE COLORES
            const palette = colorPalettes[currentCardData.name_short] || colorPalettes['ar00'];
            wallpaper.style.setProperty('--color1', palette[0]);
            wallpaper.style.setProperty('--color2', palette[1]);
            wallpaper.style.setProperty('--color3', palette[2]);
            wallpaper.style.setProperty('--color4', palette[3]);
            wallpaper.classList.add('active');

            // 2. VOLTEAR CARTA
            cardStage.classList.add('flipped');

            // 3. MOSTRAR T√çTULO
            cardTitle.textContent = currentCardData.name;
            
            // 3.5. MOSTRAR INTRODUCCI√ìN CON EJEMPLO
            const introSection = document.getElementById('introSection');
            const introExample = document.getElementById('introExample');
            const datos = currentCardData.fullData;
            
            // Usar el campo cotidiano como introducci√≥n (experiencia pr√°ctica, sin prefijo)
            introExample.textContent = datos.cotidiano ? datos.cotidiano : 'La experiencia de vida pr√°ctica.';
            introSection.style.display = 'block';
            
            // 4. LLENAR LAS SECCIONES CON DATOS ALEATORIOS
            
            // Funci√≥n auxiliar
            const getRandomItem = (category) => {
                const item = datos[category];
                if (!item || typeof item !== 'string') return '';
                return item;
            };
            
            // Llenar todas las categor√≠as del JSON - LA SECCI√ìN SIGNIFICADO USA SOMBRA (ASPECTOS TEMIBLES)
            textoSignificado.textContent = getRandomItem('sombra');
            
            textoAmpliado.textContent = getRandomItem('misticismo');
            seccionAmpliado.style.display = textoAmpliado.textContent ? 'block' : 'none';
            
            textoNegativo.textContent = getRandomItem('arquetipo');
            seccionNegativo.style.display = textoNegativo.textContent ? 'block' : 'none';
            
            // Nueva secci√≥n Bot√°nica
            textoBotanica.textContent = getRandomItem('botanica');
            seccionBotanica.style.display = textoBotanica.textContent ? 'block' : 'none';
            
            textoCotidiano.textContent = getRandomItem('cotidiano');
            seccionCotidiano.style.display = textoCotidiano.textContent ? 'block' : 'none';
            
            textoMistico.textContent = getRandomItem('gnosis');
            seccionMistico.style.display = textoMistico.textContent ? 'block' : 'none';
            
            // Vers√≠culo B√≠blico
            textoBiblico.innerHTML = getTemporalBiblicalVerse();
            seccionBiblico.style.display = 'block';

            // 5. MOSTRAR PANEL (con delay dram√°tico)
            setTimeout(() => {
                insightPanel.classList.add('active');
                // Actualizar aria-label
                cardStage.setAttribute('aria-label', 'Nueva consulta (Voltear carta)');
            }, 650);
        }

        /* ==================== MODAL DE EJEMPLOS ==================== */
        function openModal(category) {
            let concepts, title, conceptNumber;
            
            // Seleccionar array de conceptos seg√∫n la categor√≠a
            switch(category) {
                case 'arquetipo':
                    concepts = allArquetipos;
                    title = 'Arquetipo';
                    break;
                case 'misticismo':
                    concepts = allMisticismos;
                    title = 'Misticismo';
                    break;
                case 'sombra':
                    concepts = allSombras;
                    title = 'Sombra';
                    break;
                case 'botanica':
                    concepts = allBotanicas;
                    title = 'Bot√°nica';
                    break;
                case 'cotidiano':
                    concepts = allCotidianos;
                    title = 'Cotidiano';
                    break;
                case 'gnosis':
                    concepts = allGnosis;
                    title = 'Gnosis';
                    break;
                case 'resonancia_biblica':
                    concepts = allResonanciasBiblicas;
                    title = 'Resonancia B√≠blica';
                    break;
                default:
                    return;
            }
            
            // Seleccionar un concepto aleatorio
            const randomIndex = Math.floor(Math.random() * concepts.length);
            const selectedConcept = concepts[randomIndex];
            conceptNumber = randomIndex + 1; // Para mostrar 1-22 en lugar de 0-21
            
            // Obtener elementos del modal
            const modalOverlay = document.getElementById('modalOverlay');
            const modalTitle = document.getElementById('modalTitle');
            const modalText = document.getElementById('modalText');
            const modalNumber = document.getElementById('modalNumber');
            
            // Llenar contenido del modal
            modalTitle.textContent = title;
            modalNumber.textContent = `Ejemplo ${conceptNumber} de 22`;
            
            if (category === 'resonancia_biblica') {
                // Formatear contenido de resonancia b√≠blica
                modalText.innerHTML = `
                    <strong>Cita:</strong> "${selectedConcept.cita}"<br><br>
                    <strong>Referencia:</strong> ${selectedConcept.referencia}<br><br>
                    <strong>Conexi√≥n:</strong> ${selectedConcept.conexion}
                `;
            } else {
                // Mostrar concepto normal
                modalText.textContent = selectedConcept;
            }
            
            // Mostrar modal
            modalOverlay.style.display = 'flex';
            document.body.style.overflow = 'hidden'; // Prevenir scroll del body
        }
        
        function closeModal() {
            const modalOverlay = document.getElementById('modalOverlay');
            modalOverlay.style.display = 'none';
            document.body.style.overflow = 'auto'; // Restaurar scroll del body
        }

        /* ==================== RESET DEL OR√ÅCULO ==================== */
        function resetOracle() {
            // 1. Desactivar wallpaper din√°mico
            wallpaper.classList.remove('active');
            // Resetear colores a blanco despu√©s de la transici√≥n de opacidad
            setTimeout(() => {
                wallpaper.style.setProperty('--color1', '#ffffff');
                wallpaper.style.setProperty('--color2', '#ffffff');
                wallpaper.style.setProperty('--color3', '#ffffff');
                wallpaper.style.setProperty('--color4', '#ffffff');
            }, 1500); // Coincide con la transici√≥n de opacidad de los blobs
            
            // 2. Ocultar panel
            insightPanel.classList.remove('active');
            
            // 2.5. Ocultar introducci√≥n
            const introSection = document.getElementById('introSection');
            introSection.style.display = 'none';
            
            // 3. Voltear carta de regreso
            setTimeout(() => {
                cardStage.classList.remove('flipped');
                isRevealed = false;
            }, 200);

            // 4. Cargar nueva carta (con delay para fluidez)
            setTimeout(() => {
                // Ocultar secciones y resetear texto inicial
                seccionAmpliado.style.display = 'none';
                seccionNegativo.style.display = 'none';
                seccionBotanica.style.display = 'none';
                seccionCotidiano.style.display = 'none';
                seccionMistico.style.display = 'none';
                seccionBiblico.style.display = 'none';
                cardTitle.textContent = '';
                textoSignificado.textContent = '';
                cardStage.setAttribute('aria-label', 'Revelar carta del tarot');


                prepareOracle();
            }, 900);
        }

        /* ==================== EVENT LISTENERS ==================== */
        
        // Click en la carta (Intenci√≥n o Nueva Consulta)
        cardStage.addEventListener('click', (e) => {
            if (!isRevealed && currentCardData) {
                // Caso 1: Carta boca abajo -> Revelar Destino
                revealDestiny();
            } else if (isRevealed) {
                // Caso 2: Carta revelada -> Resetear Or√°culo
                resetOracle();
            }
        });
        
        // Accesibilidad: Enter/Space en la carta
        cardStage.addEventListener('keydown', (e) => {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                if (!isRevealed && currentCardData) {
                    revealDestiny();
                } else if (isRevealed) {
                    resetOracle();
                }
            }
        });

        // Hacer la carta accesible por teclado
        cardStage.setAttribute('tabindex', '0');
        cardStage.setAttribute('role', 'button');
        cardStage.setAttribute('aria-label', 'Revelar carta del tarot');


        /* ==================== INICIALIZACI√ìN ==================== */
        // Cargar la primera carta al cargar la p√°gina
        window.addEventListener('load', () => {
            prepareOracle();
        });

        // Agregar event listeners para los t√≠tulos con ">"
        document.addEventListener('DOMContentLoaded', () => {
            // Event listeners para los t√≠tulos
            document.getElementById('titleArquetipo').addEventListener('click', () => openModal('arquetipo'));
            document.getElementById('titleMisticismo').addEventListener('click', () => openModal('misticismo'));
            document.getElementById('titleSombra').addEventListener('click', () => openModal('sombra'));
            document.getElementById('titleBotanica').addEventListener('click', () => openModal('botanica'));
            document.getElementById('titleCotidiano').addEventListener('click', () => openModal('cotidiano'));
            document.getElementById('titleGnosis').addEventListener('click', () => openModal('gnosis'));
            document.getElementById('titleResonanciaBiblica').addEventListener('click', () => openModal('resonancia_biblica'));
            
            // Event listener para cerrar modal
            document.getElementById('modalClose').addEventListener('click', closeModal);
            
            // Cerrar modal al hacer click fuera del contenido
            document.getElementById('modalOverlay').addEventListener('click', (e) => {
                if (e.target === document.getElementById('modalOverlay')) {
                    closeModal();
                }
            });
            
            // Cerrar modal con tecla Escape
            document.addEventListener('keydown', (e) => {
                if (e.key === 'Escape') {
                    closeModal();
                }
            });
        });

    </script>

    <a href="https://instagram.com/parche.curitaa" target="_blank" rel="noopener noreferrer" class="instagram-btn" aria-label="S√≠guenos en Instagram">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z" fill="#555"/>
        </svg>
    </a>

    <style>
        .instagram-btn {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 56px;
            height: 56px;
            /* Ajustado al nuevo estilo glassmorphism */
            background: rgba(255, 255, 255, 0.5);
            backdrop-filter: blur(15px);
            -webkit-backdrop-filter: blur(15px);
            border: 1.5px solid rgba(255, 255, 255, 0.6);
            border-radius: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
            z-index: 1000;
            text-decoration: none;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.1);
        }

        .instagram-btn:hover {
            background: rgba(255, 255, 255, 0.7);
            transform: translateY(-4px) scale(1.05);
            box-shadow: 0 12px 32px rgba(0, 0, 0, 0.15);
            border-color: rgba(255, 255, 255, 0.8);
        }

        .instagram-btn svg {
            transition: transform 0.3s ease;
        }

        .instagram-btn:hover svg {
            transform: scale(1.1);
        }

        @media (max-width: 768px) {
            .instagram-btn {
                bottom: 20px;
                right: 20px;
                width: 48px;
                height: 48px;
            }

            .instagram-btn svg {
                width: 28px;
                height: 28px;
            }
        }
    </style>

</body>
</html>
